"use strict";(self.webpackChunkone_buck_store_ANG13=self.webpackChunkone_buck_store_ANG13||[]).push([[442],{7442:(Ue,y,u)=>{u.r(y),u.d(y,{UserModule:()=>Pe});var p=u(9808);function C(t,i,n,s,o,a,d){try{var l=t[a](d),c=l.value}catch(f){return void n(f)}l.done?i(c):Promise.resolve(c).then(s,o)}var e=u(5e3),A=u(1714),b=u(3086),r=u(2382);const S=["paypal"];function T(t,i){1&t&&(e.TgZ(0,"div",17),e._UZ(1,"div",18),e.TgZ(2,"span",19),e._uU(3,"Please wait"),e.qZA()())}function F(t,i){1&t&&(e.TgZ(0,"div",20),e._uU(1," Congratulations on your purchase! You can now use your points to buy any product you want. Good luck & enjoy your experience with us. "),e.qZA())}let q=(()=>{class t{constructor(n,s){this.shopService=n,this.alertsService=s,this.paidFor=!1,this.isLoading=!1}ngOnInit(){var s,n=this;paypal.Buttons({createOrder:(s,o)=>o.order.create({purchase_units:[{amount:{value:this.amount,currency_code:"USD"}}]}),onApprove:(s=function x(t){return function(){var i=this,n=arguments;return new Promise(function(s,o){var a=t.apply(i,n);function d(c){C(a,s,o,d,l,"next",c)}function l(c){C(a,s,o,d,l,"throw",c)}d(void 0)})}}(function*(o,a){n.isLoading=!0;const d=yield a.order.capture();n.paidFor=!0,n.userSubscription=n.shopService.userBuyPoints(d.purchase_units[0].amount.value).subscribe(l=>{n.isLoading=!1,n.amount=0})}),function(a,d){return s.apply(this,arguments)}),onError:s=>{this.alertsService.addError("Something went wrong!")},onClick:(s,o)=>this.amount<1||!Number.isInteger(this.amount)?(this.alertsService.addError("Please enter a valid number!"),o.reject()):o.resolve()}).render(this.paypalElement.nativeElement)}ngOnDestroy(){this.userSubscription&&this.userSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(A.d),e.Y36(b.m))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-buy-points"]],viewQuery:function(n,s){if(1&n&&e.Gf(S,7),2&n){let o;e.iGM(o=e.CRH())&&(s.paypalElement=o.first)}},decls:22,vars:3,consts:[["id","buyPointsFormSection",1,"section","buy-points-form"],[1,"container"],[1,"buy-points-form-container"],[1,"buy-points-box-right"],[1,"form-content-container"],[1,"form-heading","section__main-heading"],[1,"form-lead-text"],["id","amount-input-container"],["for","buyPointsInput","id","buy-points-input-label"],["placeholder","Points","type","number","tabindex","1","required","","autofocus","","id","buyPointsInput","min","1",3,"ngModel","ngModelChange"],[1,"btns"],["id","pay-with-label"],["id","paypal-buttons-container"],[1,"pay-container"],["paypal",""],["class","loader-spin-container",4,"ngIf"],["class","paid",4,"ngIf"],[1,"loader-spin-container"],[1,"loader-spin"],[1,"please-wait"],[1,"paid"]],template:function(n,s){1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),e._uU(6,"Buy Points"),e.qZA(),e.TgZ(7,"p",6),e._uU(8," We use a secure payment system to give you complete peace of mind. This system uses the latest security systems to ensure your payments are always 100% secure. Whether you\u2019re paying by card, PayPal or another method, you can be confident that your money is safe. "),e.qZA(),e.TgZ(9,"fieldset",7)(10,"label",8),e._uU(11,"Points amount:"),e.qZA(),e.TgZ(12,"input",9),e.NdJ("ngModelChange",function(a){return s.amount=a}),e.qZA()(),e.TgZ(13,"div",10)(14,"label",11),e._uU(15,"Pay with:"),e.qZA(),e.TgZ(16,"fieldset",12)(17,"div",13),e._UZ(18,"div",null,14),e.qZA()()()(),e.YNc(20,T,4,0,"div",15),e.YNc(21,F,2,0,"div",16),e.qZA()()()()),2&n&&(e.xp6(12),e.Q6J("ngModel",s.amount),e.xp6(8),e.Q6J("ngIf",s.isLoading),e.xp6(1),e.Q6J("ngIf",s.paidFor))},directives:[r.qQ,r.wV,r.Fj,r.Q7,r.JJ,r.On,p.O5],styles:[".loader-spin[_ngcontent-%COMP%]{border:16px solid #f3f3f3;border-top:16px solid var(--primary-color);border-radius:50%;width:120px;height:120px;animation:spin 2s linear infinite;margin:0 auto}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loader-spin-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:100vh;width:100vw;background-color:#000c;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:999}.please-wait[_ngcontent-%COMP%]{padding:3rem;display:block;color:var(--light-gray);font-size:1.5rem}.paid[_ngcontent-%COMP%]{padding-left:3rem;font-size:1.6rem}#amount-input-container[_ngcontent-%COMP%]{padding:2rem 0;margin:3rem 0}#pay-with-label[_ngcontent-%COMP%]{padding-top:2rem;font-size:1.6rem;margin-bottom:2rem}#buy-points-input-label[_ngcontent-%COMP%]{font-size:1.4rem;padding-right:1rem;display:block}#buyPointsInput[_ngcontent-%COMP%]{padding:1rem;font-size:1.6rem;border:1px solid #ccc;border-radius:.5rem}#buyPointsInput[_ngcontent-%COMP%]:hover{border:1px solid var(--primary-color)}#buyPointsInput[_ngcontent-%COMP%]:focus{outline:0;border:2px solid var(--primary-color)}.buy-points-form-container[_ngcontent-%COMP%], .buy-points-form-container[_ngcontent-%COMP%]   .form-heading[_ngcontent-%COMP%], .buy-points-form-container[_ngcontent-%COMP%]   .form-lead-text[_ngcontent-%COMP%]{text-align:center}.btns[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;box-shadow:#64646f33 0 7px 29px}"]}),t})();var m=u(3025),g=u(2891),Z=u(9646),I=u(4049),N=u(4482),O=u(5403),k=u(5698),Y=u(3900),J=u(4004),B=u(2340),Q=u(520);const L=B.N.apiUrl;let w=(()=>{class t{constructor(n){this.http=n}comparePasswords(){return n=>{const s=n.get("password"),o=n.get("confirmPassword");return!s||!o||o.errors&&!o.errors.notEquivalent||(s.value!==o.value?null==o||o.setErrors({notEquivalent:!0}):null==o||o.setErrors(null)),null}}isEmptyInputValue(n){return null===n||0===n.length}usernameValidator(){return n=>this.isEmptyInputValue(n.value)||""===n.value?(0,Z.of)(null):n.valueChanges.pipe(function M(t,i=I.z){return(0,N.e)((n,s)=>{let o=null,a=null,d=null;const l=()=>{if(o){o.unsubscribe(),o=null;const f=a;a=null,s.next(f)}};function c(){const f=d+t,U=i.now();if(U<f)return o=this.schedule(void 0,f-U),void s.add(o);l()}n.subscribe((0,O.x)(s,f=>{a=f,d=i.now(),o||(o=i.schedule(c,t),s.add(o))},()=>{l(),s.complete()},void 0,()=>{a=o=null}))})}(1e3),(0,k.q)(1),(0,Y.w)(s=>this.http.post(L+"/users/check-username",{username:n.value}).pipe((0,J.U)(o=>"isTaken"===o.data?{isTaken:!0}:null))))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(Q.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function E(t,i){1&t&&(e.TgZ(0,"span",11),e._uU(1,"Password has to be at least 8 characters long!"),e.qZA())}function W(t,i){1&t&&(e.TgZ(0,"span",11),e._uU(1,"Passwords have to match!"),e.qZA())}function V(t,i){1&t&&(e.TgZ(0,"span"),e._UZ(1,"i",12),e.qZA())}let G=(()=>{class t{constructor(n,s,o,a){this.route=n,this.authService=s,this.router=o,this.customValidator=a,this.resetToken="",this.showButtonSpinner=!1,this.passwordResetForm=new r.cw({password:new r.NI(null,[r.kI.required,r.kI.minLength(8)]),confirmPassword:new r.NI(null,r.kI.required)}),this.passwordResetForm.setValidators(this.customValidator.comparePasswords())}ngOnInit(){this.resetToken=this.route.snapshot.paramMap.get("token")}onSubmit(){this.showButtonSpinner=!0,this.authSubscription=this.authService.resetPasswordSend(this.passwordResetForm.value.password,this.resetToken).subscribe({next:s=>{this.showButtonSpinner=!1,this.router.navigate(["/"])},error:s=>this.showButtonSpinner=!1})}ngOnDestroy(){this.authSubscription&&this.authSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(m.gz),e.Y36(g.e),e.Y36(m.F0),e.Y36(w))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-reset-password-form"]],decls:19,vars:5,consts:[[1,"reset-password-form-container"],["id","passwordResetForm",3,"formGroup","ngSubmit"],[1,"form-lead-text"],["for","password"],["formControlName","password","placeholder","Password","type","password","required","","name","password","id","password"],["class","help-block",4,"ngIf"],["for","confirmPassword"],["formControlName","confirmPassword","placeholder","Same Password Again","type","password","required","","name","confirmPassword","id","confirmPassword","minLength","8"],["id","sub-btn"],["type","submit","id","signup-submit","tabindex","11",1,"btn",3,"disabled"],[4,"ngIf"],[1,"help-block"],[1,"fa","fa-circle-o-notch","fa-spin"]],template:function(n,s){if(1&n&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return s.onSubmit()}),e.TgZ(2,"h4",2),e._uU(3,"Please enter a new password."),e.qZA(),e._UZ(4,"hr"),e.TgZ(5,"fieldset")(6,"label",3),e._uU(7,"Password:"),e.qZA(),e._UZ(8,"input",4),e.YNc(9,E,2,0,"span",5),e.qZA(),e.TgZ(10,"fieldset")(11,"label",6),e._uU(12,"Confirm Password:"),e.qZA(),e._UZ(13,"input",7),e.YNc(14,W,2,0,"span",5),e.qZA(),e.TgZ(15,"fieldset",8)(16,"button",9),e._uU(17,"Submit "),e.YNc(18,V,2,0,"span",10),e.qZA()()()()),2&n){let o,a;e.xp6(1),e.Q6J("formGroup",s.passwordResetForm),e.xp6(8),e.Q6J("ngIf",!(null!=(o=s.passwordResetForm.get("password"))&&o.valid)&&((null==(o=s.passwordResetForm.get("password"))?null:o.dirty)||(null==(o=s.passwordResetForm.get("password"))?null:o.touched))),e.xp6(5),e.Q6J("ngIf",null==(a=s.passwordResetForm.get("confirmPassword"))||null==a.errors?null:a.errors.notEquivalent),e.xp6(2),e.Q6J("disabled",!s.passwordResetForm.valid||s.showButtonSpinner),e.xp6(2),e.Q6J("ngIf",s.showButtonSpinner)}},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,r.Q7,p.O5],styles:[".reset-password-form-container[_ngcontent-%COMP%]{padding:5rem 3rem;background-color:#fbfbfb}#passwordResetForm[_ngcontent-%COMP%]{max-width:50rem}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:var(--red-color)}.help-block[_ngcontent-%COMP%]{display:block;text-align:left}@media only screen and (max-width: 599px){.reset-password-form-container[_ngcontent-%COMP%]{padding:3rem}#passwordResetForm[_ngcontent-%COMP%]{max-width:50rem}}"]}),t})();function R(t,i){1&t&&(e.TgZ(0,"span",34),e._uU(1,"Please enter a valid username."),e.qZA())}function z(t,i){1&t&&(e.TgZ(0,"span",34),e._uU(1,"Username already exists, try another one!"),e.qZA())}function j(t,i){1&t&&(e.TgZ(0,"span",34),e._uU(1,"Username already exists, try another one"),e.qZA())}function D(t,i){1&t&&(e.TgZ(0,"span",34),e._uU(1,"Password should be at least 8 characters long."),e.qZA())}function X(t,i){1&t&&(e.TgZ(0,"span",34),e._uU(1,"Passwords have to match!"),e.qZA())}function H(t,i){1&t&&(e.TgZ(0,"span",34),e._uU(1,"Please enter a valid email."),e.qZA())}function $(t,i){1&t&&(e.TgZ(0,"span",34),e._uU(1,"Email already used, try another one!"),e.qZA())}function K(t,i){1&t&&(e.TgZ(0,"span"),e._UZ(1,"i",35),e.qZA())}let ee=(()=>{class t{constructor(n,s,o,a){this.customValidator=n,this.authService=s,this.router=o,this.document=a,this.showButtonSpinner=!1,this.signupForm=new r.cw({username:new r.NI(null,[r.kI.required],[this.customValidator.usernameValidator()]),password:new r.NI(null,[r.kI.required,r.kI.minLength(8)]),confirmPassword:new r.NI(null,r.kI.required),firstName:new r.NI(null,r.kI.required),lastName:new r.NI(null,r.kI.required),email:new r.NI(null,[r.kI.required,r.kI.email]),country:new r.NI(null,r.kI.required),address:new r.NI(null,r.kI.required),postal:new r.NI(null,r.kI.required),city:new r.NI(null,r.kI.required)}),this.signupForm.setValidators(this.customValidator.comparePasswords())}get username(){return this.signupForm.get("username")}ngOnInit(){this.document.documentElement.scrollTo(0,165)}onSubmit(){this.showButtonSpinner=!0,this.authSubscription=this.authService.signup({username:this.signupForm.value.username,firstName:this.signupForm.value.firstName,lastName:this.signupForm.value.lastName,email:this.signupForm.value.email,password:this.signupForm.value.password,address:{country:this.signupForm.value.country,city:this.signupForm.value.city,homeAddress:this.signupForm.value.address,postalCode:this.signupForm.value.postal}}).subscribe({next:s=>{this.showButtonSpinner=!1,this.router.navigate(["/"])},error:s=>{this.showButtonSpinner=!1,"Username taken"===s&&this.signupForm.controls.username.setErrors({usernameTaken:!0}),"Email already in use"===s&&this.signupForm.controls.email.setErrors({emailTaken:!0})}})}ngOnDestroy(){this.authSubscription&&this.authSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(w),e.Y36(g.e),e.Y36(m.F0),e.Y36(p.K0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-signup-form"]],decls:73,vars:10,consts:[["id","registerFormSection",1,"section","register-form","text-center"],[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-content-container"],[1,"form-heading"],[1,"form-lead-text"],["for","username"],["formControlName","username","placeholder","Username","type","text","tabindex","1","id","username","autofocus","","required",""],["class","help-block",4,"ngIf"],["for","password"],["formControlName","password","placeholder","Password","type","password","tabindex","2","required","","name","password","id","password","minLength","8"],["for","confirmPassword"],["formControlName","confirmPassword","placeholder","Same Password Again","type","password","tabindex","3","required","","name","confirmPassword","id","confirmPassword","minLength","8"],["for","firstName"],["formControlName","firstName","placeholder","First Name","type","text","tabindex","4","required","","name","firstName","id","firstName"],["for","lastName"],["formControlName","lastName","placeholder","Last Name","type","text","tabindex","5","required","","name","lastName","id","lastName"],["for","email"],["formControlName","email","placeholder","Your Email Address","type","email","tabindex","6","required","","email","","name","email","id","email"],["for","country"],["formControlName","country","placeholder","Your Country","type","text","tabindex","7","required","","name","country","id","country"],["for","address"],["formControlName","address","placeholder","Your Home Address","type","text","tabindex","8","required","","name","address","id","address"],["for","postal"],["formControlName","postal","placeholder","Your Zip or Postal Code","type","text","tabindex","9","required","","name","postal","id","postal"],["for","city"],["formControlName","city","placeholder","Your City","type","text","tabindex","10","required","","name","city","id","city"],["id","sub-btn"],["type","submit","id","signup-submit","tabindex","11",1,"btn",3,"disabled"],[4,"ngIf"],[1,"register-form-info"],[1,"text-red"],["routerLink","/info/terms",1,"register-form-info__link"],["routerLink","/info/privacy-policy",1,"register-form-info__link"],[1,"help-block"],[1,"fa","fa-circle-o-notch","fa-spin"]],template:function(n,s){if(1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){return s.onSubmit()}),e.TgZ(3,"div",3)(4,"h2",4),e._uU(5,"Sign up"),e.qZA(),e.TgZ(6,"h4",5),e._uU(7,"Congratulations on signing up with the One Buck Store. With hundreds of products on offer, we\u2019re confident you\u2019ll find exactly what you need. ."),e.qZA(),e.TgZ(8,"h4",5),e._uU(9,"All your data is completely confidential. It\u2019s not shared with 3rd parties, giving you full peace of mind whilst you browse on our site. "),e.qZA(),e._UZ(10,"hr"),e.TgZ(11,"fieldset")(12,"label",6),e._uU(13,"Username:"),e.qZA(),e._UZ(14,"input",7),e.YNc(15,R,2,0,"span",8),e.YNc(16,z,2,0,"span",8),e.YNc(17,j,2,0,"span",8),e.qZA(),e.TgZ(18,"fieldset")(19,"label",9),e._uU(20,"Password:"),e.qZA(),e._UZ(21,"input",10),e.YNc(22,D,2,0,"span",8),e.qZA(),e.TgZ(23,"fieldset")(24,"label",11),e._uU(25,"Confirm Password:"),e.qZA(),e._UZ(26,"input",12),e.YNc(27,X,2,0,"span",8),e.qZA(),e.TgZ(28,"fieldset")(29,"label",13),e._uU(30,"First Name:"),e.qZA(),e._UZ(31,"input",14),e.qZA(),e.TgZ(32,"fieldset")(33,"label",15),e._uU(34,"Last Name:"),e.qZA(),e._UZ(35,"input",16),e.qZA(),e.TgZ(36,"fieldset")(37,"label",17),e._uU(38,"Email:"),e.qZA(),e._UZ(39,"input",18),e.YNc(40,H,2,0,"span",8),e.YNc(41,$,2,0,"span",8),e.qZA(),e.TgZ(42,"fieldset")(43,"label",19),e._uU(44,"Country:"),e.qZA(),e._UZ(45,"input",20),e.qZA(),e.TgZ(46,"fieldset")(47,"label",21),e._uU(48,"Address:"),e.qZA(),e._UZ(49,"textarea",22),e.qZA(),e.TgZ(50,"fieldset")(51,"label",23),e._uU(52,"Zip/Postal Code:"),e.qZA(),e._UZ(53,"input",24),e.qZA(),e.TgZ(54,"fieldset")(55,"label",25),e._uU(56,"City:"),e.qZA(),e._UZ(57,"input",26),e.qZA(),e._uU(58,"- "),e.TgZ(59,"fieldset",27)(60,"button",28),e._uU(61,"Submit "),e.YNc(62,K,2,0,"span",29),e.qZA()(),e.TgZ(63,"div",30)(64,"span",31),e._uU(65,"*"),e.qZA(),e._uU(66," By creating your account, you agree to our "),e.TgZ(67,"a",32),e._uU(68,"Terms and Conditions"),e.qZA(),e._uU(69," & "),e.TgZ(70,"a",33),e._uU(71,"Privacy Policy"),e.qZA(),e._uU(72,"."),e.qZA()()()()()),2&n){let o,a,d,l,c;e.xp6(2),e.Q6J("formGroup",s.signupForm),e.xp6(13),e.Q6J("ngIf",!(null!=(o=s.signupForm.get("username"))&&o.valid)&&((null==(o=s.signupForm.get("username"))?null:o.dirty)||(null==(o=s.signupForm.get("username"))?null:o.touched))),e.xp6(1),e.Q6J("ngIf",null==(a=s.signupForm.get("username"))||null==a.errors?null:a.errors.usernameTaken),e.xp6(1),e.Q6J("ngIf",null==s.username||null==s.username.errors?null:s.username.errors.isTaken),e.xp6(5),e.Q6J("ngIf",null==s.signupForm.controls.password.errors?null:s.signupForm.controls.password.errors.minlength),e.xp6(5),e.Q6J("ngIf",null==(d=s.signupForm.get("confirmPassword"))||null==d.errors?null:d.errors.notEquivalent),e.xp6(13),e.Q6J("ngIf",!(null!=(l=s.signupForm.get("email"))&&l.valid)&&((null==(l=s.signupForm.get("email"))?null:l.dirty)||(null==(l=s.signupForm.get("email"))?null:l.touched))),e.xp6(1),e.Q6J("ngIf",null==(c=s.signupForm.get("email"))||null==c.errors?null:c.errors.emailTaken),e.xp6(19),e.Q6J("disabled",!s.signupForm.valid||s.showButtonSpinner),e.xp6(2),e.Q6J("ngIf",s.showButtonSpinner)}},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,r.Q7,p.O5,r.on,m.yS],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:var(--red-color)}.help-block[_ngcontent-%COMP%]{display:block;text-align:left}"]}),t})();var v=u(2785),h=u(900),P=u(3797);function te(t,i){1&t&&e._UZ(0,"div",2)}function ne(t,i){1&t&&(e.ynx(0),e.TgZ(1,"h2",7),e._uU(2,"Oh no! Your cart is currently empty. "),e.TgZ(3,"a",8),e._uU(4,"Click Here"),e.qZA(),e._uU(5," to browse our products and find the one for you."),e.qZA(),e.BQk())}function se(t,i){if(1&t&&e._UZ(0,"app-product-card",12),2&t){const n=i.$implicit,s=e.oxw(3);e.Q6J("sale",n)("userWishlist",s.userWishlist)("userId",s.userId)("isAuthenticated",s.isAuthenticated)}}function re(t,i){if(1&t&&(e.TgZ(0,"h2",9),e._uU(1,"You\u2019re only a few clicks away from a chance to win your dream product. "),e.qZA(),e.TgZ(2,"div",10),e.YNc(3,se,1,4,"app-product-card",11),e.qZA()),2&t){const n=e.oxw(2);e.xp6(3),e.Q6J("ngForOf",n.cartProds)}}function oe(t,i){if(1&t&&(e.TgZ(0,"section",3)(1,"div",4),e.YNc(2,ne,6,0,"ng-container",5),e.YNc(3,re,4,1,"ng-template",null,6,e.W1O),e.qZA()()),2&t){const n=e.MAs(4),s=e.oxw();e.xp6(2),e.Q6J("ngIf",0===s.cartProds.length)("ngIfElse",n)}}let ie=(()=>{class t{constructor(n,s){this.userService=n,this.appService=s,this.cartProds=[],this.isAuthenticated=!1,this.isLoading=!1}ngOnInit(){this.isLoading=!0,this.userSubscription=this.userService.getCart().subscribe(n=>{this.isLoading=!1,this.cartProds=n.data},n=>this.isLoading=!1),this.authSubscription=this.appService.user$.subscribe(n=>{n?(this.userWishlist=n.wishlist,this.userId=n._id):this.userWishlist=[],this.isAuthenticated=!!n})}ngOnDestroy(){this.userSubscription.unsubscribe(),this.authSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(v.K),e.Y36(h.z))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-cart"]],decls:2,vars:2,consts:[["class","loader",4,"ngIf"],["class","section user-cart","id","userCart",4,"ngIf"],[1,"loader"],["id","userCart",1,"section","user-cart"],[1,"container"],[4,"ngIf","ngIfElse"],["imaGi",""],[1,"section__main-heading","user-wishlist__heading","text-center"],["routerLink","/shop/products",1,"user-wishlist__link"],[1,"section__main-heading","text-center","user-cart__heading"],[1,"user-cart__content-box"],[3,"sale","userWishlist","userId","isAuthenticated",4,"ngFor","ngForOf"],[3,"sale","userWishlist","userId","isAuthenticated"]],template:function(n,s){1&n&&(e.YNc(0,te,1,0,"div",0),e.YNc(1,oe,5,2,"section",1)),2&n&&(e.Q6J("ngIf",s.isLoading),e.xp6(1),e.Q6J("ngIf",!s.isLoading))},directives:[p.O5,m.yS,p.sg,P.Y],styles:[""]}),t})();function ae(t,i){1&t&&(e.TgZ(0,"span",14),e._uU(1,"Password should be at least 8 characters long"),e.qZA())}function ue(t,i){1&t&&(e.TgZ(0,"span",14),e._uU(1,"Passwords have to match!"),e.qZA())}let le=(()=>{class t{constructor(n,s,o){this.customValidator=n,this.authService=s,this.alertsService=o,this.changePasswordForm=new r.cw({currentPassword:new r.NI(null,r.kI.required),password:new r.NI(null,[r.kI.required,r.kI.minLength(8)]),confirmPassword:new r.NI(null,r.kI.required)}),this.changePasswordForm.setValidators(this.customValidator.comparePasswords())}ngOnInit(){}onSubmit(){const{currentPassword:n,password:s}=this.changePasswordForm.value;this.authSubscription=this.authService.updatePassword(n,s).subscribe(o=>{this.changePasswordForm.reset(),this.alertsService.addSuccess("Password successfully changed!")})}ngOnDestroy(){this.authSubscription&&this.authSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(w),e.Y36(g.e),e.Y36(b.m))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-change-password"]],decls:24,vars:4,consts:[[1,"change-password-form-container"],[3,"formGroup","ngSubmit"],[1,"change-password-form-content-container"],[1,"form-heading"],[1,"form-lead-text"],["for","currentPassword"],["formControlName","currentPassword","placeholder","Password","type","password","tabindex","5","required","","name","currentPassword","id","currentPassword","minLength","8"],["for","password"],["formControlName","password","placeholder","Password","type","password","tabindex","5","required","","name","password","id","password","minLength","8"],["class","help-block",4,"ngIf"],["for","confirmPassword"],["formControlName","confirmPassword","placeholder","Same Password Again","type","password","tabindex","6","required","","name","confirmPassword","id","confirmPassword","minLength","8"],["id","sub-btn"],["type","submit","id","change-password-submit","tabindex","11",3,"disabled"],[1,"help-block"]],template:function(n,s){if(1&n&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return s.onSubmit()}),e.TgZ(2,"div",2)(3,"h3",3),e._uU(4,"Change Password"),e.qZA(),e.TgZ(5,"h4",4),e._uU(6," Please fill out the following fields to change password. "),e.qZA(),e.TgZ(7,"fieldset")(8,"label",5),e._uU(9,"Current password:"),e.qZA(),e._UZ(10,"input",6),e.qZA(),e.TgZ(11,"fieldset")(12,"label",7),e._uU(13,"New password:"),e.qZA(),e._UZ(14,"input",8),e.YNc(15,ae,2,0,"span",9),e.qZA(),e.TgZ(16,"fieldset")(17,"label",10),e._uU(18,"Confirm Password:"),e.qZA(),e._UZ(19,"input",11),e.YNc(20,ue,2,0,"span",9),e.qZA(),e.TgZ(21,"fieldset",12)(22,"button",13),e._uU(23," Submit "),e.qZA()()()()()),2&n){let o;e.xp6(1),e.Q6J("formGroup",s.changePasswordForm),e.xp6(14),e.Q6J("ngIf",null==s.changePasswordForm.controls.password.errors?null:s.changePasswordForm.controls.password.errors.minlength),e.xp6(5),e.Q6J("ngIf",null==(o=s.changePasswordForm.get("confirmPassword"))||null==o.errors?null:o.errors.notEquivalent),e.xp6(2),e.Q6J("disabled",!s.changePasswordForm.valid)}},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,r.Q7,p.O5],styles:["button[_ngcontent-%COMP%]:disabled{background-color:#2597dd66;color:var(--light-gray);cursor:auto}button[_ngcontent-%COMP%]:disabled:hover{background-color:#2597dd66;color:var(--light-gray);cursor:auto}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:var(--red-color)}.help-block[_ngcontent-%COMP%]{display:block;text-align:left}.change-password-form-container[_ngcontent-%COMP%]{padding:2rem}.change-password-form-content-container[_ngcontent-%COMP%]{padding:2rem;background-color:#f7f7f7}h3.form-heading[_ngcontent-%COMP%]{font-size:1.8rem}@media only screen and (max-width: 599px){h3.form-heading[_ngcontent-%COMP%]{font-size:1.6rem}}"]}),t})();function de(t,i){1&t&&e._UZ(0,"i",25)}function ce(t,i){1&t&&e._UZ(0,"i",26)}function pe(t,i){1&t&&(e.TgZ(0,"span"),e._UZ(1,"i",32),e.qZA())}function me(t,i){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"fieldset",27)(2,"button",28),e._uU(3,"Submit "),e.YNc(4,pe,2,0,"span",29),e.qZA()(),e.TgZ(5,"fieldset",30)(6,"button",31),e.NdJ("click",function(){return e.CHM(n),e.oxw().onCancelEditMode()}),e._uU(7,"Cancel"),e.qZA()(),e.BQk()}if(2&t){const n=e.oxw();e.xp6(2),e.Q6J("disabled",!n.editUserForm.valid||n.showButtonSpinner),e.xp6(2),e.Q6J("ngIf",n.showButtonSpinner)}}function fe(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"fieldset",30)(1,"button",33),e.NdJ("click",function(){return e.CHM(n),e.oxw().onEnterEditMode()}),e._uU(2,"Edit"),e.qZA()()}if(2&t){const n=e.oxw();e.xp6(1),e.Q6J("disabled",n.showButtonSpinner)}}let ge=(()=>{class t{constructor(n,s,o,a){this.appService=n,this.authService=s,this.router=o,this.alertsService=a,this.editMode=!1,this.showButtonSpinner=!1,this.editUserForm=new r.cw({firstName:new r.NI(null,r.kI.required),lastName:new r.NI(null,r.kI.required),country:new r.NI(null,r.kI.required),homeAddress:new r.NI(null,r.kI.required),postalCode:new r.NI(null,r.kI.required),city:new r.NI(null,r.kI.required)})}ngOnInit(){this.editMode||this.editUserForm.disable(),this.userSubscription=this.appService.user$.subscribe(n=>{n?(this.user=n,this.setFormValues()):this.router.navigateByUrl("/")})}onSubmit(){this.showButtonSpinner=!0,this.userSubscription=this.authService.updateUser(this.editUserForm.value,this.user._id).subscribe({next:n=>{this.alertsService.addSuccess("Your data was edited successfully!"),this.showButtonSpinner=!1,this.onCancelEditMode()},error:n=>this.showButtonSpinner=!1})}setFormValues(){this.user&&this.editUserForm.patchValue({firstName:this.user.firstName,lastName:this.user.lastName,country:this.user.address.country,city:this.user.address.city,homeAddress:this.user.address.homeAddress,postalCode:this.user.address.postalCode||""})}onEnterEditMode(){this.editMode=!0,this.editUserForm.enable()}onCancelEditMode(){this.editMode=!1,this.editUserForm.reset(),this.setFormValues(),this.editUserForm.disable()}ngOnDestroy(){this.userSubscription&&this.userSubscription.unsubscribe(),this.updateSubscription&&this.updateSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(h.z),e.Y36(g.e),e.Y36(m.F0),e.Y36(b.m))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-settings"]],decls:43,vars:9,consts:[[1,"section","user-edit-form-section","text-center"],[1,"container"],[1,"euf-part-2"],[1,"user-edit-form-container"],["id","editUserForm",3,"formGroup","ngSubmit"],["id","user-edit-form-content-container"],[1,"form-heading"],["class","fas fa-user",4,"ngIf"],["class","fas fa-user-edit",4,"ngIf"],[1,"form-lead-text"],["for","firstName"],["formControlName","firstName","placeholder","First Name","type","text","tabindex","5","required","","name","firstName","id","firstName"],["for","lastName"],["formControlName","lastName","placeholder","Last Name","type","text","tabindex","6","required","","name","lastName","id","lastName"],["for","country"],["formControlName","country","placeholder","Your Country","type","text","tabindex","8","required","","name","country","id","country"],["for","homeAddress"],["formControlName","homeAddress","placeholder","Your Home Address","type","text","tabindex","9","required","","name","homeAddress","id","homeAddress"],["for","postalCode"],["formControlName","postalCode","placeholder","Your Zip or Postal Code","type","text","tabindex","10","required","","name","postalCode","id","postalCode"],["for","city"],["formControlName","city","placeholder","Your City","type","text","tabindex","11","required","","name","city","id","city"],[4,"ngIf","ngIfElse"],["editBtn",""],[1,"euf-part-1"],[1,"fas","fa-user"],[1,"fas","fa-user-edit"],["id","sub-btn"],["type","submit","tabindex","13","id","edit-user-submit-btn",3,"disabled"],[4,"ngIf"],["id","edit-btn"],["type","button","tabindex","14",1,"btn","btn-red",3,"click"],[1,"fa","fa-circle-o-notch","fa-spin"],["type","button","id","editUserBtn","tabindex","13",1,"btn","btn-primary",3,"disabled","click"]],template:function(n,s){if(1&n&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),e.NdJ("ngSubmit",function(){return s.onSubmit()}),e.TgZ(5,"div",5)(6,"h2",6)(7,"span"),e.YNc(8,de,1,0,"i",7),e.YNc(9,ce,1,0,"i",8),e.qZA(),e._uU(10),e.qZA(),e.TgZ(11,"h4",9),e._uU(12),e.qZA(),e._UZ(13,"hr"),e.TgZ(14,"fieldset")(15,"label",10),e._uU(16,"First Name:"),e.qZA(),e._UZ(17,"input",11),e.qZA(),e.TgZ(18,"fieldset")(19,"label",12),e._uU(20,"Last Name:"),e.qZA(),e._UZ(21,"input",13),e.qZA(),e.TgZ(22,"fieldset")(23,"label",14),e._uU(24,"Country:"),e.qZA(),e._UZ(25,"input",15),e.qZA(),e.TgZ(26,"fieldset")(27,"label",16),e._uU(28,"Address:"),e.qZA(),e._UZ(29,"textarea",17),e.qZA(),e.TgZ(30,"fieldset")(31,"label",18),e._uU(32,"Zip/Postal Code:"),e.qZA(),e._UZ(33,"input",19),e.qZA(),e.TgZ(34,"fieldset")(35,"label",20),e._uU(36,"City:"),e.qZA(),e._UZ(37,"input",21),e.qZA(),e.YNc(38,me,8,2,"ng-container",22),e.YNc(39,fe,3,1,"ng-template",null,23,e.W1O),e.qZA()()()(),e.TgZ(41,"div",24),e._UZ(42,"app-change-password"),e.qZA()()()),2&n){const o=e.MAs(40);e.xp6(4),e.Q6J("formGroup",s.editUserForm),e.xp6(3),e.ekj("editing",s.editMode),e.xp6(1),e.Q6J("ngIf",!s.editMode),e.xp6(1),e.Q6J("ngIf",s.editMode),e.xp6(1),e.hij(" ",s.user.username,""),e.xp6(2),e.Oqu(s.user.email),e.xp6(26),e.Q6J("ngIf",s.editMode)("ngIfElse",o)}},directives:[r._Y,r.JL,r.sg,p.O5,r.Fj,r.JJ,r.u,r.Q7,le],styles:[".user-edit-form-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:50%;padding:1rem;border-radius:.5rem}.user-edit-form-container[_ngcontent-%COMP%]{width:100%;padding:2rem}#user-edit-form-content-container[_ngcontent-%COMP%]{padding:2rem}.user-edit-form-section[_ngcontent-%COMP%]{background:#fbfbfb}.user-edit-form-section[_ngcontent-%COMP%] > .container[_ngcontent-%COMP%]{padding:0 2rem 2rem;display:flex;justify-content:space-around;width:100%}.euf-part-2[_ngcontent-%COMP%]{flex:1.5}.euf-part-1[_ngcontent-%COMP%]{flex:1}#editUserForm[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{border:1px solid #FBFBFB;background:#FBFBFB}#editUserForm[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:disabled{border:1px solid #FBFBFB;background:#FBFBFB}.editing[_ngcontent-%COMP%]{color:var(--red-color)}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}#edit-user-submit-btn[_ngcontent-%COMP%]:disabled{background-color:#2597dd66;color:var(--light-gray);cursor:auto}#edit-user-submit-btn[_ngcontent-%COMP%]:disabled:hover{background-color:#2597dd66;color:var(--light-gray);cursor:auto}@media only screen and (max-width: 899px){.user-edit-form-section[_ngcontent-%COMP%] > .container[_ngcontent-%COMP%]{flex-direction:column}.euf-part-1[_ngcontent-%COMP%], .euf-part-2[_ngcontent-%COMP%]{padding:0 4rem}}@media only screen and (max-width: 599px){.user-edit-form-container[_ngcontent-%COMP%], #user-edit-form-content-container[_ngcontent-%COMP%]{padding:1rem}.user-edit-form-section[_ngcontent-%COMP%] > .container[_ngcontent-%COMP%]{padding:1rem}.euf-part-1[_ngcontent-%COMP%], .euf-part-2[_ngcontent-%COMP%]{padding:0 1rem}}"]}),t})();function he(t,i){1&t&&e._UZ(0,"div",2)}function _e(t,i){1&t&&(e.ynx(0),e.TgZ(1,"h2",7),e._uU(2,"If you had 1 wish, what would it be? "),e.TgZ(3,"a",8),e._uU(4,"Click Here"),e.qZA(),e._uU(5," to find that product and add it to your Wishlist!"),e.qZA(),e.BQk())}function be(t,i){if(1&t&&e._UZ(0,"app-product-card",12),2&t){const n=i.$implicit,s=e.oxw(3);e.Q6J("sale",n)("userWishlist",s.userWishlist)("userId",s.userId)("isAuthenticated",s.isAuthenticated)}}function we(t,i){if(1&t&&(e.TgZ(0,"h2",9),e._uU(1,"Your dreams are waiting to come true."),e.qZA(),e.TgZ(2,"div",10),e.YNc(3,be,1,4,"app-product-card",11),e.qZA()),2&t){const n=e.oxw(2);e.xp6(3),e.Q6J("ngForOf",n.wishlistedProds)}}function ye(t,i){if(1&t&&(e.TgZ(0,"section",3)(1,"div",4),e.YNc(2,_e,6,0,"ng-container",5),e.YNc(3,we,4,1,"ng-template",null,6,e.W1O),e.qZA()()),2&t){const n=e.MAs(4),s=e.oxw();e.xp6(2),e.Q6J("ngIf",0===s.wishlistedProds.length)("ngIfElse",n)}}let Ce=(()=>{class t{constructor(n,s){this.userService=n,this.appService=s,this.wishlistedProds=[],this.isAuthenticated=!1,this.isLoading=!1}ngOnInit(){this.isLoading=!0,this.userSubscription=this.userService.getUserWishlistProducts().subscribe(n=>{this.wishlistedProds=n.data,this.isLoading=!1}),this.authSubscription=this.appService.user$.subscribe(n=>{n?(this.userWishlist=n.wishlist,this.userId=n._id):this.userWishlist=[],this.isAuthenticated=!!n})}ngOnDestroy(){this.userSubscription.unsubscribe(),this.authSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(v.K),e.Y36(h.z))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-wishlist"]],decls:2,vars:2,consts:[["class","loader",4,"ngIf"],["class","section user-wishlist","id","userWishlist",4,"ngIf"],[1,"loader"],["id","userWishlist",1,"section","user-wishlist"],[1,"container"],[4,"ngIf","ngIfElse"],["imagi",""],[1,"section__main-heading","user-wishlist__heading","text-center"],["routerLink","/shop/products",1,"user-wishlist__link"],[1,"section__main-heading","text-center","user-wishlist__heading"],[1,"user-wishlist__content-box"],[3,"sale","userWishlist","userId","isAuthenticated",4,"ngFor","ngForOf"],[3,"sale","userWishlist","userId","isAuthenticated"]],template:function(n,s){1&n&&(e.YNc(0,he,1,0,"div",0),e.YNc(1,ye,5,2,"section",1)),2&n&&(e.Q6J("ngIf",s.isLoading),e.xp6(1),e.Q6J("ngIf",!s.isLoading))},directives:[p.O5,m.yS,p.sg,P.Y],styles:[""]}),t})();var Ze=u(4466);let _=(()=>{class t{constructor(n,s){this.appService=n,this.router=s}canActivate(n,s){return!!this.appService.getIsAuth()||this.router.parseUrl("/home")}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(h.z),e.LFG(m.F0))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const ve=[{path:"signup",component:ee},{path:"reset-password/:token",component:G},{path:"wishlist",canActivate:[_],component:Ce},{path:"me",canActivate:[_],component:ge},{path:"points",canActivate:[_],component:q},{path:"cart",canActivate:[_],component:ie}];let Pe=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[p.ez,r.UX,r.u5,m.Bz.forChild(ve),Ze.m]]}),t})()}}]);